# Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберете подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий
    - **Для данных целей лучше всего подойдет Hyper-V, за счет того что преимущественно будет использоваться Windows based инфраструктура** 
- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
    - **Для данных целей лучше всего подойдет KVM, за счет его производительности и бесплатности, так-же поддержкой windows и linux инфрастуктур**
- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры 
    - **Для данных целей лучше всего подойдет KVM, за счет бесплатности, проихводительности о совместимости с Windows инфрастуктурами**
- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux
    - **Для данных целей лучше всего подойдет либо KVM либо Xen HVM, за счет совместимости с Linux инфрастуктурами**


## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.
- **Любая виртуальная машина, вне зависимости от платформы, состоит из двух основных частей: собственно, виртуальной машины - текстового или XML-файла с описанием ее конфигурации и виртуального жесткого диска**
- **Для переноса виртуальной системы достаточно перенести виртуальный диск**
- **Виртальные диски VMware vSphere и Hyper-V отличаються тем что:**
    - **VMware vSphere диск (VMDK) - это обычный RAW, где геометрия диска описывается в обычном текстовом файле-описателе (дескрипторе)**
    - **Hyper-V диск (VHDX) - вся информация о геометрии диска хранится в первых 4096 Кбайтах виртуального диска – в области заголовка, а остальная часть обычный ROW**
- **Конвертация из VMDK(RAW) в VHDX зависит от фаловой системы**
- **Вручную на файловой системе NTFS это можно сделать, сместив в MFT начало файла на 4 Мб вперед и дописав в это место заголовок**
- **Для добавления заголовка можно вопспользоваться данной программой: StarWind V2V Converter**

## Задача 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 
- **Основная проблема заключается в том что будет перерасходование ресурсов для работы различных инфрастуктур. Например будет запускаться гипервизор для Windows, который для Linux не требуется**
- **Для обеспечения минимализации рисков и проблем, будет предпочтительно использовать максимально подобные инфрастуктуры. Например разные дистрибутивы Linux или разные версии Windows**
- **Если бы у меня был выбор, то из-за перечисленных недостатков геторагенную среду я бы не создавал, если бы не стояло жестих ограничений, что что то работает или не работает в одной их инфрастуктур**

# Доработка ДЗ

Задание 1
1.1 Не будет проблем с Linux-машинами?
- **В данном случае будет лучшим использовать Xen Pv, благодаря тому что данный тип предварительно выделяет ОЗУ и ядра для гипервизора, что позволяет работать безперебойно большому количеству виртуальных машин, если одна из машин выйдет из строя и начнет потреблять больше ресурсов**
1.3 В чём будет преимущество KVM в этом случае?
- **Благодаря тому что в KVM лучше реализована поддержка Windows, чем в альтернативном бесплатном Xen**  